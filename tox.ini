[tox]
envlist = py{36,37,38,39}, coverage
skip_missing_interpreters = True



[testenv]
deps =
    pytest
    pytest-cov
setenv = COVERAGE_FILE={toxworkdir}/.coverage.{envname}
commands = {envpython} -m pytest --cov=fru --cov-report=term



[testenv:coverage]
deps = coverage
skip_install = True
changedir = {toxworkdir}
setenv = COVERAGE_FILE=.coverage
commands =
    {envpython} -m coverage erase
    {envpython} -m coverage combine
    {envpython} -m coverage html --rcfile="{toxinidir}/tox.ini"



[coverage:run]
branch = True



[coverage:html]
directory = coverage-report
